spriteset(spriteset_BR700_Purchase, "gfx/BR700_v2.png") {
	template_purchase(200, 0)
}

// Class 700 sprites (Desiro City WIP sheet)
// Base livery rows at x=0: A, A rev, B, C, D, E, F, F rev
// Pride A/F rows are at x=175 on the same Y values.
// Role notes:
// - A and F are the driving ends.
// - D and G are distinct roles; both use dedicated drawn sprites.
//   G is the "reverse-template-in-forward-consist" car to keep offsets correct.
spriteset(spriteset_BR700a_GTR, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old(0, 175) }
spriteset(spriteset_BR700a_GTR_rev, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old_reversed(0, 200) }
spriteset(spriteset_BR700b_GTR, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old(0, 225) }
spriteset(spriteset_BR700b_GTR_rev, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old_reversed(0, 225) }
spriteset(spriteset_BR700c_GTR, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old(0, 250) }
spriteset(spriteset_BR700c_GTR_rev, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old_reversed(0, 250) }
spriteset(spriteset_BR700d_GTR, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old(0, 275) }
spriteset(spriteset_BR700d_GTR_rev, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old_reversed(0, 275) }
spriteset(spriteset_BR700g_GTR, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old(0, 300) }
spriteset(spriteset_BR700g_GTR_rev, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old_reversed(0, 300) }
spriteset(spriteset_BR700e_GTR, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old(0, 325) }
spriteset(spriteset_BR700e_GTR_rev, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old_reversed(0, 325) }
spriteset(spriteset_BR700f_GTR, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old(0, 350) }
spriteset(spriteset_BR700f_GTR_rev, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old_reversed(0, 375) }

spriteset(spriteset_BR700a_GTRPride, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old(175, 175) }
spriteset(spriteset_BR700a_GTRPride_rev, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old_reversed(175, 200) }
spriteset(spriteset_BR700f_GTRPride, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old(175, 350) }
spriteset(spriteset_BR700f_GTRPride_rev, "gfx/EMU/Desiro_City_WIP.png") { template_train32px_old_reversed(175, 375) }

// ---------------------------------------------------------------------------
// Selector chain overview (novice-oriented)
//
// There are two parallel selector chains:
// - 8-car chain:  switch_BR700_8_direction
//                 -> switch_BR700_8_roles_fwd / switch_BR700_8_roles_rev
// - 12-car chain: switch_BR700_12_direction
//                 -> switch_BR700_12_roles_fwd / switch_BR700_12_roles_rev
//
// How each level works:
// 1) *_direction:
//    Checks vehicle_is_reversed and picks forward or reverse role mapper.
// 2) *_roles_fwd:
//    Uses position_in_articulated_veh % unit_length to assign a role.
// 3) *_roles_rev:
//    Uses position_in_consist_from_end % unit_length and the SAME role order
//    as forward, so role mapping stays stable when the train reverses.
//
// Role switches:
// - sw_BR700[a-g] choose the forward sprite for that role.
// - sw_BR700[a-g]_rev choose the reversed sprite for that role.
// - Reverse role switches read mirrored cargo_subtype (var 0xF2), so A/F Pride
//   still lines up correctly in reversed or mixed consists.
// ---------------------------------------------------------------------------

// Role selectors (forward, chosen by livery/cargo subtype)
switch(FEAT_TRAINS, SELF, sw_BR700a, cargo_subtype) {
	0: spriteset_BR700a_GTR;
	1: spriteset_BR700a_GTRPride;
	default: spriteset_BR700a_GTR;
}

switch(FEAT_TRAINS, SELF, sw_BR700b, cargo_subtype) {
	0: spriteset_BR700b_GTR;
	1: spriteset_BR700b_GTR;
	default: spriteset_BR700b_GTR;
}

switch(FEAT_TRAINS, SELF, sw_BR700c, cargo_subtype) {
	0: spriteset_BR700c_GTR;
	1: spriteset_BR700c_GTR;
	default: spriteset_BR700c_GTR;
}

switch(FEAT_TRAINS, SELF, sw_BR700d, cargo_subtype) {
	0: spriteset_BR700d_GTR;
	1: spriteset_BR700d_GTR;
	default: spriteset_BR700d_GTR;
}

switch(FEAT_TRAINS, SELF, sw_BR700g, cargo_subtype) {
	0: spriteset_BR700g_GTR;
	1: spriteset_BR700g_GTR;
	default: spriteset_BR700g_GTR;
}

switch(FEAT_TRAINS, SELF, sw_BR700e, cargo_subtype) {
	0: spriteset_BR700e_GTR;
	1: spriteset_BR700e_GTR;
	default: spriteset_BR700e_GTR;
}

switch(FEAT_TRAINS, SELF, sw_BR700f, cargo_subtype) {
	0: spriteset_BR700f_GTR;
	1: spriteset_BR700f_GTRPride;
	default: spriteset_BR700f_GTR;
}

// Role selectors (reversed sprites, with mirrored cargo subtype via var 0xF2)
switch(FEAT_TRAINS, SELF, sw_BR700a_rev, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]) {
	0: spriteset_BR700a_GTR_rev;
	1: spriteset_BR700a_GTRPride_rev;
	default: spriteset_BR700a_GTR_rev;
}

switch(FEAT_TRAINS, SELF, sw_BR700b_rev, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]) {
	0: spriteset_BR700b_GTR_rev;
	1: spriteset_BR700b_GTR_rev;
	default: spriteset_BR700b_GTR_rev;
}

switch(FEAT_TRAINS, SELF, sw_BR700c_rev, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]) {
	0: spriteset_BR700c_GTR_rev;
	1: spriteset_BR700c_GTR_rev;
	default: spriteset_BR700c_GTR_rev;
}

switch(FEAT_TRAINS, SELF, sw_BR700d_rev, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]) {
	0: spriteset_BR700d_GTR_rev;
	1: spriteset_BR700d_GTR_rev;
	default: spriteset_BR700d_GTR_rev;
}

switch(FEAT_TRAINS, SELF, sw_BR700g_rev, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]) {
	0: spriteset_BR700g_GTR_rev;
	1: spriteset_BR700g_GTR_rev;
	default: spriteset_BR700g_GTR_rev;
}

switch(FEAT_TRAINS, SELF, sw_BR700e_rev, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]) {
	0: spriteset_BR700e_GTR_rev;
	1: spriteset_BR700e_GTR_rev;
	default: spriteset_BR700e_GTR_rev;
}

switch(FEAT_TRAINS, SELF, sw_BR700f_rev, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]) {
	0: spriteset_BR700f_GTR_rev;
	1: spriteset_BR700f_GTRPride_rev;
	default: spriteset_BR700f_GTR_rev;
}

// 700/0 role order by articulated position:
// index: 0,1,2,3,4,5,6,7
// role : A,B,C,G,D,C,E,F
switch(FEAT_TRAINS, SELF, switch_BR700_8_roles_fwd, position_in_articulated_veh % 8) {
	0: sw_BR700a;
	1: sw_BR700b;
	2: sw_BR700c;
	3: sw_BR700g;
	4: sw_BR700d;
	5: sw_BR700c;
	6: sw_BR700e;
	7: sw_BR700f;
	sw_BR700c;
}

// Reversed 700/0 role map (indexed from mirrored articulated position).
// Using var 0x61/0x41 keeps role mapping stable with translators/locos present.
switch(FEAT_TRAINS, SELF, switch_BR700_8_roles_rev,
		[STORE_TEMP(position_in_consist_from_end - position_in_consist, 0x10F),
		 var[0x61, 0, 0x000000FF, 0x41] % 8]) {
	0: sw_BR700a_rev;
	1: sw_BR700b_rev;
	2: sw_BR700c_rev;
	3: sw_BR700g_rev;
	4: sw_BR700d_rev;
	5: sw_BR700c_rev;
	6: sw_BR700e_rev;
	7: sw_BR700f_rev;
	sw_BR700c_rev;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_8_direction, vehicle_is_reversed) {
	1: switch_BR700_8_roles_rev;
	switch_BR700_8_roles_fwd;
}

// 700/1 role order by articulated position:
// index: 0,1,2,3,4,5,6,7,8,9,10,11
// role : A,B,C,C,C,G,D,C,C,C,E,F
switch(FEAT_TRAINS, SELF, switch_BR700_12_roles_fwd, position_in_articulated_veh % 12) {
	0: sw_BR700a;
	1: sw_BR700b;
	2: sw_BR700c;
	3: sw_BR700c;
	4: sw_BR700c;
	5: sw_BR700g;
	6: sw_BR700d;
	7: sw_BR700c;
	8: sw_BR700c;
	9: sw_BR700c;
	10: sw_BR700e;
	11: sw_BR700f;
	sw_BR700c;
}

// Reversed 700/1 role map (indexed from mirrored articulated position).
// Using var 0x61/0x41 keeps role mapping stable with translators/locos present.
switch(FEAT_TRAINS, SELF, switch_BR700_12_roles_rev,
		[STORE_TEMP(position_in_consist_from_end - position_in_consist, 0x10F),
		 var[0x61, 0, 0x000000FF, 0x41] % 12]) {
	0: sw_BR700a_rev;
	1: sw_BR700b_rev;
	2: sw_BR700c_rev;
	3: sw_BR700c_rev;
	4: sw_BR700c_rev;
	5: sw_BR700g_rev;
	6: sw_BR700d_rev;
	7: sw_BR700c_rev;
	8: sw_BR700c_rev;
	9: sw_BR700c_rev;
	10: sw_BR700e_rev;
	11: sw_BR700f_rev;
	sw_BR700c_rev;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_12_direction, vehicle_is_reversed) {
	1: switch_BR700_12_roles_rev;
	switch_BR700_12_roles_fwd;
}

switch(FEAT_TRAINS, SELF, switch_articulated_BR700, extra_callback_info1) {
	1..7: return item_BR700;
	return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch(FEAT_TRAINS, SELF, switch_articulated_BR700_2, extra_callback_info1) {
	1..11: return item_BR700_2;
	return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch(FEAT_TRAINS, SELF, sw_BR700_cargo_subtype_text, cargo_subtype) {
	0: return string(str_GTR);
	1: return string(str_GTRPride);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, switch_BR700_can_attach_wagon_8, vehicle_type_id) {
	item_BR700: return CB_RESULT_ATTACH_ALLOW;
	item_BRMk2_Translator: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_CANNOT_ATTACH);
}

switch(FEAT_TRAINS, SELF, switch_BR700_can_attach_wagon_12, vehicle_type_id) {
	item_BR700_2: return CB_RESULT_ATTACH_ALLOW;
	item_BRMk2_Translator: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_CANNOT_ATTACH);
}

// Class 700 units are single-unit only: block starting if consist length exceeds 13.
switch(FEAT_TRAINS, SELF, switch_BR700_start_stop, num_vehs_in_consist) {
	1..13: return CB_RESULT_NO_TEXT;
	return string(STR_BR_700_MW_LIMIT);
}

// Class 700 effect chain (single method): create_effect only.
// Active pickup points are the second and second-to-last cars.
// ELRL uses standard electric effect; THIRD uses SAA3 third-rail offset.
switch(FEAT_TRAINS, SELF, switch_BR700_create_effect_8_elrl_pos, position_in_articulated_veh % 8) {
	1: electric_create_visual_effect;
	6: electric_create_visual_effect;
	return 0;
}

switch(FEAT_TRAINS, SELF, switch_BR700_create_effect_8_third_pos, position_in_articulated_veh % 8) {
	1: electric_create_visual_effect_SAA3;
	6: electric_create_visual_effect_SAA3;
	return 0;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_create_effect_8_by_railtype_third, tile_powers_railtype("THIRD")) {
	1: switch_BR700_create_effect_8_third_pos;
	return 0;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_create_effect_8_by_railtype, tile_powers_railtype("ELRL")) {
	1: switch_BR700_create_effect_8_elrl_pos;
	switch_BR700_create_effect_8_by_railtype_third;
}

switch(FEAT_TRAINS, SELF, switch_BR700_create_effect_12_elrl_pos, position_in_articulated_veh % 12) {
	1: electric_create_visual_effect;
	10: electric_create_visual_effect;
	return 0;
}

switch(FEAT_TRAINS, SELF, switch_BR700_create_effect_12_third_pos, position_in_articulated_veh % 12) {
	1: electric_create_visual_effect_SAA3;
	10: electric_create_visual_effect_SAA3;
	return 0;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_create_effect_12_by_railtype_third, tile_powers_railtype("THIRD")) {
	1: switch_BR700_create_effect_12_third_pos;
	return 0;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_create_effect_12_by_railtype, tile_powers_railtype("ELRL")) {
	1: switch_BR700_create_effect_12_elrl_pos;
	switch_BR700_create_effect_12_by_railtype_third;
}

// Translator handling for Class 700:
// Bit 0 in bitmask_vehicle_info marks translator wagons.
switch(FEAT_TRAINS, PARENT, switch_BR700_power_8_with_translator, (bitmask_consist_info & 0x01)) {
	0: return 4425;
	return 0;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_power_12_with_translator, (bitmask_consist_info & 0x01)) {
	0: return 6705;
	return 0;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_te_with_translator, (bitmask_consist_info & 0x01)) {
	0: return 38; // 0.15 * 255
	return 0;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_create_effect_8_with_translator, (bitmask_consist_info & 0x01)) {
	0: switch_BR700_create_effect_8_by_railtype;
	return 0;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_create_effect_12_with_translator, (bitmask_consist_info & 0x01)) {
	0: switch_BR700_create_effect_12_by_railtype;
	return 0;
}

switch(FEAT_TRAINS, SELF, switch_sound_electric_700_muted, getbits(extra_callback_info1, 0, 8)) {
	SOUND_EVENT_BREAKDOWN: SOUND_BREAKDOWN_TRAIN_SHIP;
}

switch(FEAT_TRAINS, PARENT, switch_sound_electric_700_with_translator, (bitmask_consist_info & 0x01)) {
	0: sw_sound_electric_350;
	switch_sound_electric_700_muted;
}

// 700/0 per-car capacity split (8 cars).
// Seated total: 727
// High-capacity total (standing mode): 1146
switch(FEAT_TRAINS, SELF, switch_BR700_cargo_capacity_8_seated, position_in_consist % 8) {
	0: return(92 * param_pax);
	1: return(91 * param_pax);
	2: return(91 * param_pax);
	3: return(91 * param_pax);
	4: return(90 * param_pax);
	5: return(90 * param_pax);
	6: return(90 * param_pax);
	7: return(92 * param_pax);
	return(90 * param_pax);
}

switch(FEAT_TRAINS, SELF, switch_BR700_cargo_capacity_8_high, position_in_consist % 8) {
	0: return(144 * param_pax);
	7: return(144 * param_pax);
	return(143 * param_pax);
}

switch(FEAT_TRAINS, SELF, switch_BR700_cargo_capacity_8, param_standing_capacity) {
	1: switch_BR700_cargo_capacity_8_high;
	switch_BR700_cargo_capacity_8_seated;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_cargo_capacity_8_with_translator, (bitmask_consist_info & 0x01)) {
	0: switch_BR700_cargo_capacity_8;
	return 0;
}

// 700/1 per-car capacity split (12 cars).
// Seated total: 666
// High-capacity total (standing mode): 1754
switch(FEAT_TRAINS, SELF, switch_BR700_cargo_capacity_12_seated, position_in_consist % 12) {
	0: return(56 * param_pax);
	1: return(56 * param_pax);
	2: return(56 * param_pax);
	3: return(55 * param_pax);
	4: return(55 * param_pax);
	5: return(55 * param_pax);
	6: return(55 * param_pax);
	7: return(55 * param_pax);
	8: return(55 * param_pax);
	9: return(56 * param_pax);
	10: return(56 * param_pax);
	11: return(56 * param_pax);
	return(55 * param_pax);
}

switch(FEAT_TRAINS, SELF, switch_BR700_cargo_capacity_12_high, position_in_consist % 12) {
	0: return(147 * param_pax);
	11: return(147 * param_pax);
	return(146 * param_pax);
}

switch(FEAT_TRAINS, SELF, switch_BR700_cargo_capacity_12, param_standing_capacity) {
	1: switch_BR700_cargo_capacity_12_high;
	switch_BR700_cargo_capacity_12_seated;
}

switch(FEAT_TRAINS, PARENT, switch_BR700_cargo_capacity_12_with_translator, (bitmask_consist_info & 0x01)) {
	0: switch_BR700_cargo_capacity_12;
	return 0;
}

// Purchase text helper for 700/0 with exact total capacity by current params.
switch(FEAT_TRAINS, SELF, switch_BR700_8_additional_text, param_standing_capacity * 10 + param_pax) {
	1: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_0_capacity_1x),
			string(str_BR700_0_liveries)));
	2: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_0_capacity_2x),
			string(str_BR700_0_liveries)));
	3: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_0_capacity_3x),
			string(str_BR700_0_liveries)));
	4: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_0_capacity_4x),
			string(str_BR700_0_liveries)));
	11: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_0_capacity_hc_1x),
			string(str_BR700_0_liveries)));
	12: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_0_capacity_hc_2x),
			string(str_BR700_0_liveries)));
	13: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_0_capacity_hc_3x),
			string(str_BR700_0_liveries)));
	14: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_0_capacity_hc_4x),
			string(str_BR700_0_liveries)));
	return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_0_capacity_1x),
			string(str_BR700_0_liveries)));
}

// Purchase text helper for 700/1 with exact total capacity by current params.
switch(FEAT_TRAINS, SELF, switch_BR700_12_additional_text, param_standing_capacity * 10 + param_pax) {
	1: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_1_capacity_1x),
			string(str_BR700_1_liveries)));
	2: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_1_capacity_2x),
			string(str_BR700_1_liveries)));
	3: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_1_capacity_3x),
			string(str_BR700_1_liveries)));
	4: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_1_capacity_4x),
			string(str_BR700_1_liveries)));
	11: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_1_capacity_hc_1x),
			string(str_BR700_1_liveries)));
	12: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_1_capacity_hc_2x),
			string(str_BR700_1_liveries)));
	13: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_1_capacity_hc_3x),
			string(str_BR700_1_liveries)));
	14: return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_1_capacity_hc_4x),
			string(str_BR700_1_liveries)));
	return(string(str_purchase_loco_with_liveries_and_capacity_and_mw,
			string(str_purchase_type_emu),
			string(str_BR700_usage),
			string(str_multiple_working_no),
			string(str_BR700_eos),
			string(str_BR700_1_capacity_1x),
			string(str_BR700_1_liveries)));
}

item (FEAT_TRAINS, item_BR700, 255) {
	property {
		variant_group:					header_DesiroCity;
		name: 							string(STR_NAME_BR700);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2015,4,21);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					25;
		cost_factor:					123;
		running_cost_factor:			70;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		refit_cost:						0;
		track_type:						[THIRD, THIRD, ELRL];
		ai_special_flag:				AI_FLAG_CARGO;
		power:							4425 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					56;
		weight:							306 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.15;
		air_drag_coefficient:			0.05;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		extra_weight_per_wagon:			0;
		bitmask_vehicle_info:			0;
	}
	graphics {
		additional_text:				switch_BR700_8_additional_text;
		can_attach_wagon:				switch_BR700_can_attach_wagon_8;
		start_stop:						switch_BR700_start_stop;
		cargo_subtype_text:				sw_BR700_cargo_subtype_text;
		articulated_part:				switch_articulated_BR700;
		default: 						switch_BR700_8_direction;
		purchase:						spriteset_BR700_Purchase;
		create_effect:					switch_BR700_create_effect_8_with_translator;
		colour_mapping: 				return PALETTE_CC_FIRST;
		sound_effect:					switch_sound_electric_700_with_translator;
		power:							switch_BR700_power_8_with_translator;
		tractive_effort_coefficient:	switch_BR700_te_with_translator;
		cargo_capacity:					switch_BR700_cargo_capacity_8_with_translator;
		cost_factor:					return(GetAdjustedCost(123));
		running_cost_factor:			return(GetAdjustedCost(70));
	}
}

item (FEAT_TRAINS, item_BR700_2, 256) {
	property {
		variant_group:					header_DesiroCity;
		name: 							string(STR_NAME_BR700_2);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2015,4,21);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					25;
		cost_factor:					164;
		running_cost_factor:			94;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		refit_cost:						0;
		track_type:						[THIRD, THIRD, ELRL];
		ai_special_flag:				AI_FLAG_CARGO;
		power:							6705 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					83;
		weight:							451 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.15;
		air_drag_coefficient:			0.05;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		extra_weight_per_wagon:			0;
		bitmask_vehicle_info:			0;
	}
	graphics {
		additional_text:				switch_BR700_12_additional_text;
		can_attach_wagon:				switch_BR700_can_attach_wagon_12;
		start_stop:						switch_BR700_start_stop;
		cargo_subtype_text:				sw_BR700_cargo_subtype_text;
		articulated_part:				switch_articulated_BR700_2;
		default: 						switch_BR700_12_direction;
		purchase:						spriteset_BR700_Purchase;
		create_effect:					switch_BR700_create_effect_12_with_translator;
		colour_mapping: 				return PALETTE_CC_FIRST;
		sound_effect:					switch_sound_electric_700_with_translator;
		power:							switch_BR700_power_12_with_translator;
		tractive_effort_coefficient:	switch_BR700_te_with_translator;
		cargo_capacity:					switch_BR700_cargo_capacity_12_with_translator;
		cost_factor:					return(GetAdjustedCost(164));
		running_cost_factor:			return(GetAdjustedCost(94));
	}
}
